var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{W:()=>h});const n=function(){function t(){}return t.clearRecords=function(){this.data=[]},t.removeHTML=function(t,e){},t.updateHTML=function(t){},t.addElement=function(t,e){var n=this.getRecord(t);n.elements.includes(e)||(n.elements.push(e),this.updateHTML(t))},t.removeElement=function(t,e){var n=this.getRecord(t);this.removeHTML(t,e),n.elements=n.elements.filter((function(t){return t!==e}))},t.clearElements=function(t){var e=this,n=this.getRecord(t);n.elements.forEach((function(n){return e.removeHTML(t,n)})),n.elements=[]},t.getRecord=function(t){var e=this.data.find((function(e){return e.id===t}));return void 0===e&&(e={id:t,elements:[],default:[],custom:[]},this.data.push(e)),e},t.addDefaultName=function(t,e){if(void 0!==e){var n=this.getRecord(t);n.default.includes(e)||(n.default.push(e),this.updateHTML(t))}},t.removeDefaultName=function(t,e){var n=this;if(void 0!==e){var i=this.getRecord(t);i.elements.forEach((function(e){return n.removeHTML(t,e)})),i.default=i.default.filter((function(t){return t!==e})),this.updateHTML(t)}},t.clearDefaultNames=function(t){var e=this,n=this.getRecord(t);n.elements.forEach((function(n){return e.removeHTML(t,n)})),n.default=[],this.updateHTML(t)},t.addCustomName=function(t,e){if(void 0!==e){var n=this.getRecord(t);n.custom.includes(e)||(n.custom.push(e),this.updateHTML(t))}},t.removeCustomName=function(t,e){var n=this;if(void 0!==e){var i=this.getRecord(t);i.elements.forEach((function(e){return n.removeHTML(t,e)})),i.custom=i.custom.filter((function(t){return t!==e})),this.updateHTML(t)}},t.clearCustomNames=function(t){var e=this,n=this.getRecord(t);n.elements.forEach((function(n){return e.removeHTML(t,n)})),n.custom=[],this.updateHTML(t)},t.data=[],t}();var i,r=(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.removeHTML=function(t,e){var n=this.getRecord(t);n.default.forEach((function(t){return e.classList.remove(t)})),n.custom.forEach((function(t){return e.classList.remove(t)}))},e.updateHTML=function(t){var e=this.getRecord(t);e.elements.forEach((function(t){e.default.forEach((function(e){return t.classList.add(e)})),e.custom.forEach((function(e){return t.classList.add(e)}))}))},e.data=[],e}(n);var a=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();const s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.removeHTML=function(t,e){var n=this.getRecord(t);n.default.forEach((function(t){var n=Array.isArray(t)?t[0]:t;delete e.dataset[n]})),n.custom.forEach((function(t){var n=Array.isArray(t)?t[0]:t;delete e.dataset[n]}))},e.updateHTML=function(t){var e=this.getRecord(t);e.elements.forEach((function(t){e.default.forEach((function(e){var n=Array.isArray(e)?e[0]:e,i=Array.isArray(e)?e[1]:"";t.dataset[n]=i})),e.custom.forEach((function(e){var n=Array.isArray(e)?e[0]:e,i=Array.isArray(e)?e[1]:"";t.dataset[n]=i}))}))},e.data=[],e}(n),d=function(){function t(t){var e=this;this.container=document.createElement("div"),o.addElement("filterContainer",this.container),o.addDefaultName("filterContainer","zgrid_filter_container"),s.addElement("filterContainer",this.container);var n=document.createElement("input");o.addElement("filter",n),o.addDefaultName("filter","zgrid_filter"),s.addElement("filter",n),n.type="text",n.id="zgrid_filter",n.placeholder="Type a keyword...",n.oninput=function(t){null!=e.oninput&&e.oninput(t,n.value)},this.container.appendChild(n),t.appendChild(this.container)}return Object.defineProperty(t.prototype,"visible",{get:function(){return this.container.classList.contains("zgrid_hidden")},set:function(t){t?this.container.classList.remove("zgrid_hidden"):this.container.classList.add("zgrid_hidden")},enumerable:!1,configurable:!0}),t}(),c=function(){function t(t){this.current_sort="none",this.sort_enabled=!0,this.resizing=!1,this.element=document.createElement("th"),o.addElement("th",this.element),o.addCustomName("th","zgrid_header"),s.addElement("th",this.element);var e=document.createElement("div");e.classList.add("zgrid_header_content"),this.title=document.createElement("div"),this.title.classList.add("zgrid_title"),this.setupSorting(),this.setupResizing(),e.appendChild(this.title),e.appendChild(this.buttonContainer),e.appendChild(this.resize),this.element.appendChild(e),t.appendChild(this.element)}return t.prototype.setupSorting=function(){var t=this;this.buttonContainer=document.createElement("div"),this.buttonContainer.classList.add("zgrid_sort_button_container"),this.sortAscending=document.createElement("button"),this.sortAscending.classList.add("zgrid_sort_button"),this.sortAscending.innerText="▲",this.sortAscending.onclick=function(e){t.sort_enabled&&!t.resizing&&(t.sort="ascending"===t.current_sort?"none":"ascending",void 0!==t.onsort&&t.onsort(t.current_sort),e.stopPropagation())},this.sortDescending=document.createElement("button"),this.sortDescending.classList.add("zgrid_sort_button"),this.sortDescending.innerText="▼",this.sortDescending.onclick=function(e){t.sort_enabled&&!t.resizing&&(t.sort="descending"===t.sort?"none":"descending",void 0!==t.onsort&&t.onsort(t.sort),e.stopPropagation())},this.title.onclick=function(e){t.sort_enabled&&!t.resizing&&("none"===t.sort?t.sort="ascending":"ascending"===t.sort?t.sort="descending":"descending"===t.sort&&(t.sort="none"),void 0!==t.onsort&&t.onsort(t.sort))},this.buttonContainer.appendChild(this.sortAscending),this.buttonContainer.appendChild(this.sortDescending)},t.prototype.setupResizing=function(){var t=this;this.resize=document.createElement("button");var e=0;document.addEventListener("mousemove",(function(n){if(t.resizing){var i=n.clientX-e;e=n.clientX,null!=t.onresize&&t.onresize(i)}})),document.addEventListener("mouseup",(function(e){t.resizing&&(t.resizing=!1)})),this.resize.onmousedown=function(n){t.resizing=!0,e=n.clientX,n.stopPropagation()},this.resize.classList.add("zgrid_column_resize")},Object.defineProperty(t.prototype,"innerText",{set:function(t){this.title.innerText=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sort",{get:function(){return this.current_sort},set:function(t){var e="zgrid_sort_button_active";"none"===t?(this.sortAscending.classList.remove(e),this.sortDescending.classList.remove(e)):"ascending"===t?(this.sortAscending.classList.add(e),this.sortDescending.classList.remove(e)):"descending"===t&&(this.sortAscending.classList.remove(e),this.sortDescending.classList.add(e)),this.current_sort=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return parseFloat(this.element.style.width)},set:function(t){this.element.style.width=void 0===t?"":"".concat(t,"%")},enumerable:!1,configurable:!0}),t.prototype.remove=function(){o.removeElement("th",this.element),s.removeElement("th",this.element),this.element.remove()},t.prototype.enableSort=function(t){t?this.buttonContainer.classList.remove("zgrid_hidden"):this.buttonContainer.classList.add("zgrid_hidden"),this.sort_enabled=t},t}(),u=function(){function t(t,e){var n=this;void 0===e&&(e=1);var i=document.createElement("div");o.addElement("paginationContainer",i),o.addDefaultName("paginationContainer","zgrid_pages_container"),s.addElement("paginationContainer",i);var r=document.createElement("button");o.addElement("paginationPrevious",r),o.addDefaultName("paginationPrevious","zgrid_page_button"),s.addElement("paginationPrevious",r),r.innerText="Previous",r.onclick=function(){return n.previousPage()},i.appendChild(r),o.addDefaultName("paginationCurrent","zgrid_current_page"),this.buttons=[];for(var a=0;a<7;a++)this.buttons[a]=document.createElement("button"),o.addElement("paginationButton",this.buttons[a]),s.addElement("paginationButton",this.buttons[a]),this.buttons[a].innerText="".concat(a+1),i.appendChild(this.buttons[a]);o.addDefaultName("paginationButton","zgrid_page_button");var d=document.createElement("button");o.addElement("paginationNext",d),o.addDefaultName("paginationNext","zgrid_page_button"),s.addElement("paginationNext",d),d.innerText="Next",d.onclick=function(t){return n.nextPage()},i.appendChild(d),t.appendChild(i),this.currentPage=1,this.totalPages=e}return Object.defineProperty(t.prototype,"totalPages",{get:function(){return this.maxPages},set:function(t){if(t!==this.maxPages){for(var e=0;e<7;e++)t<=7&&e>=t?this.buttons[e].classList.add("zgrid_hidden"):this.buttons[e].classList.remove("zgrid_hidden");this.maxPages=t,this.page=this.currentPage>t?t:this.currentPage}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"page",{get:function(){return this.currentPage},set:function(t){var e=this;if(t<0)throw new RangeError("page (".concat(t,") cannot be less than zero"));if(t>this.maxPages)throw new RangeError("page (".concat(t,") cannot be greater than the total number of pages (").concat(this.maxPages,")"));for(var n=function(n){var r;if(i.maxPages<=7)r=n+1;else if(0==n)r=1;else if(1==n&&t>4||n==i.buttons.length-2&&t<i.maxPages-3)r=void 0;else if(n==i.buttons.length-1)r=i.maxPages;else{var a=t<=4?4:t;a=t>=i.maxPages-3?i.maxPages-3:a,r=a+(n-3)}i.buttons[n].innerText="".concat(r||"..."),void 0===r?(i.buttons[n].onclick=void 0,o.removeElement("paginationCurrent",i.buttons[n]),s.removeElement("paginationCurrent",i.buttons[n]),s.addElement("paginationCurrent",i.buttons[n])):(i.buttons[n].onclick=function(t){e.page=r},r==t?(o.addElement("paginationCurrent",i.buttons[n]),s.addElement("paginationCurrent",i.buttons[n])):(o.removeElement("paginationCurrent",i.buttons[n]),s.removeElement("paginationCurrent",i.buttons[n])))},i=this,r=0;r<this.buttons.length;r++)n(r);this.currentPage=t,void 0!==this.onpagechange&&this.onpagechange(t)},enumerable:!1,configurable:!0}),t.prototype.nextPage=function(){this.currentPage!=this.maxPages&&(this.page=this.currentPage+1)},t.prototype.previousPage=function(){1!=this.currentPage&&(this.page=this.currentPage-1)},t}();var l=function(){return l=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},l.apply(this,arguments)},h=function(){function t(t){this.currentPage=1,this.parent=this.configureParent(t.parent),this.columns=this.configureColumns(t.columns),this.data=this.configureData(t.data),this.pagination=this.configurePagination(t.pagination),this.filter=this.configureFilter(t.filter),this.showFilter=void 0===t.searchbox||!!t.searchbox,this.selection=void 0===t.selection||!!t.selection,this.selected=null,this.header_cells=[],this.onFilter=t.onFilter,this.onPageChange=t.onPageChange,this.onSort=t.onSort,this.onClick=t.onClick,o.addDefaultName("tr","zgrid_row"),o.addDefaultName("td","zgrid_cell"),o.addDefaultName("selected","zgrid_selected"),this.configureUI(),this.configureClassName(t.className),this.configureDataAttributes(t.dataAttribute),this.render()}return t.prototype.configureParent=function(t){if(null===t)throw new TypeError("Parent cannot be null");if(void 0===t)throw new TypeError("Parent cannot be undefined");if(!(t instanceof HTMLElement))throw new TypeError("Parent must be HTMLElement");if(t.hasChildNodes())throw new TypeError("Parent must not have child nodes");return t},t.prototype.configureColumns=function(t){if(null===t)throw new TypeError("Columns cannot be null");if(void 0===t)throw new TypeError("Columns cannot be undefined");if(!Array.isArray(t))throw new TypeError("Columns must be array or object");if(t.length<1)throw new Error("Columns length must be at least 1");var e=[],n=!1;if(e=t.map((function(t){var e;if("string"==typeof t)e={id:t,name:t,sort:!0,visible:!0};else if("object"==typeof t){if(void 0===t.id)throw new TypeError("Column requires an id");"id"===t.id&&(n=!0),e={id:t.id,name:void 0===t.name?t.id:t.name,sort:void 0===t.sort||t.sort,visible:void 0===t.visible||t.visible}}return e})),n){var i=e.findIndex((function(t){return"id"===t.id}));e.unshift(e.splice(i,1)[0])}else e.unshift({id:"id",name:"id",sort:!0,visible:!1});return e},t.prototype.initializeRow=function(t){var e=this,n={};if(Array.isArray(t))this.columns.forEach((function(i,r){e.columns.forEach((function(e,i){var r=null===t[i]||void 0===t[i]?"":t[i];n[e.id]=r}))}));else{if("object"!=typeof t)throw new TypeError("data must be string or object");this.columns.forEach((function(e,i){var r=null===t[e.id]||void 0===t[e.id]?"":t[e.id];n[e.id]=r}));for(var i=function(t,e){if(void 0===r.columns.find((function(e){return e.id===t}))){var i=null==e?"":e;n[t]=i}},r=this,o=0,a=Object.entries(t);o<a.length;o++){var s=a[o];i(s[0],s[1])}}if(""===n.id)throw new Error("rows must define an id");return n},t.prototype.configureData=function(t){var e,n=this;if(!Array.isArray(t))throw new TypeError("Data must be an array");var i=[];if(e=t.map((function(t){var e=n.initializeRow(t);return i.push(e.id),e})),new Set(i).size!==i.length)throw new Error("ids must be unique");return e},t.prototype.configurePagination=function(t){var e;if(t){if(!("number"==typeof t&&t>0))throw new TypeError("Pagination must be a number greater than 0");e=t}else e=!1;return e},t.prototype.configureFilter=function(t){var e;if(t){if("string"!=typeof t&&"function"!=typeof t)throw new TypeError("Filter must be a string or function");e=t}else e="";return e},t.prototype.configureClassName=function(t){this.className=void 0===t?{}:t,o.clearCustomNames("paginationNext"),o.clearCustomNames("paginationPrevious");var e=this.className.paginationButton;if(void 0!==e){if(!/^-?[_a-zA-Z]+[_a-zA-Z0-9-]$/.test(e))throw new Error("Invalid css class name (".concat(e,")"));o.addCustomName("paginationNext",e),o.addCustomName("paginationPrevious",e)}for(var n=0,i=Object.entries(this.className);n<i.length;n++){var r=i[n],a=r[0],s=r[1];if(!/^-?[_a-zA-Z]+[_a-zA-Z0-9-]$/.test(s))throw new Error("Invalid css class name (".concat(s,")"));o.clearCustomNames(a),o.addCustomName(a,s)}},t.prototype.configureDataAttributes=function(t){this.dataAttribute=void 0===t?{}:t,s.clearCustomNames("paginationNext"),s.clearCustomNames("paginationPrevious"),s.clearCustomNames("paginationCurrent");var e=this.dataAttribute.paginationButton;if(void 0!==e)for(var n=0,i=Object.entries(e);n<i.length;n++){var r=i[n],o=r[0],a=r[1];if(!/^\S+$/.test(a))throw new Error("Invalid data attribute (".concat(a,")"));s.addCustomName("paginationNext",[o,a]),s.addCustomName("paginationPrevious",[o,a]),s.addCustomName("paginationCurrent",[o,a])}for(var d=0,c=Object.entries(this.dataAttribute);d<c.length;d++){var u=c[d],l=u[0],h=u[1];s.clearCustomNames(l);for(var f=0,p=Object.entries(h);f<p.length;f++){var g=p[f],m=g[0];if(a=g[1],!/^\S+$/.test(a))throw new Error("Invalid data attribute (".concat(a,")"));s.addCustomName(l,[m,a])}}},t.prototype.configureUI=function(){var t=this;this.body=document.createElement("tbody"),o.addElement("tbody",this.body),s.addElement("tbody",this.body);var e=document.createElement("div");e.classList.add("zgrid_container");var n=document.createElement("table");o.addElement("table",n),o.addDefaultName("table","zgrid_table"),s.addElement("table",n),this.head=document.createElement("thead"),o.addElement("thead",this.head),s.addElement("thead",this.head),this.ui_filter=new d(e),this.ui_filter.visible=this.showFilter,this.ui_filter.oninput=function(e,n){t.reconfigure({filter:n}),null!=t.onFilter&&t.onFilter(n),t.renderData()},this.ui_header_row=document.createElement("tr"),o.addElement("tr",this.ui_header_row),s.addElement("tr",this.ui_header_row),this.head.appendChild(this.ui_header_row),n.appendChild(this.head),n.appendChild(this.body),e.appendChild(n),this.pages_info_container=document.createElement("div"),this.pages_info_container.classList.add("zgrid_pages_info_container"),this.pagination||this.pages_info_container.classList.add("zgrid_hidden"),this.pages_info=document.createElement("div"),o.addElement("paginationInfo",this.pages_info),o.addDefaultName("paginationInfo","zgrid_pages_info"),s.addElement("paginationInfo",this.pages_info),this.pages_info_container.appendChild(this.pages_info),this.ui_pages=new u(this.pages_info_container),this.ui_pages.page=1,this.ui_pages.onpagechange=function(e){e!==t.currentPage&&(t.currentPage=e,t.renderData(),void 0!==t.onPageChange&&t.onPageChange(e))},e.appendChild(this.pages_info_container),this.parent.appendChild(e)},t.prototype.reconfigure=function(t){var e=!1,n=!1;if(void 0!==t.parent){var i=this.parent;this.parent=this.configureParent(t.parent),this.parent.appendChild(i.firstChild)}if(void 0!==t.columns){if(this.columns=this.configureColumns(t.columns),this.sortConfig&&"function"!=typeof this.sortConfig){var r=this.sortConfig.column;this.columns.some((function(t){return t.id===r}))||this.sort()}e=!0}void 0!==t.data&&(this.data=this.configureData(t.data),n=!0),void 0!==t.pagination&&(this.pagination=this.configurePagination(t.pagination),this.pagination?this.pages_info_container.classList.remove("zgrid_hidden"):this.pages_info_container.classList.add("zgrid_hidden"),n=!0),void 0!==t.filter&&(this.filter=this.configureFilter(t.filter),n=!0),void 0!==t.searchbox&&(this.showFilter=!!t.searchbox,this.ui_filter.visible=this.showFilter),void 0!==t.selection&&(this.selection=!!t.selection),void 0!==t.onFilter&&(this.onFilter=t.onFilter),void 0!==t.onPageChange&&(this.onPageChange=t.onPageChange),void 0!==t.onSort&&(this.onSort=t.onSort),void 0!==t.onClick&&(this.onClick=t.onClick),e?this.render():n&&this.renderData()},t.prototype.setSelected=function(t){var e=this.data.find((function(e){return e.id===t}));return void 0===e?null:t===this.selected?this.selection?e:null:(this.selected=t,this.renderData(),e)},t.prototype.getSelected=function(){var t=this;return this.selection&&null!==this.selected?this.data.find((function(e){return e.id===t.selected})):null},t.prototype.addRow=function(t){var e=this.initializeRow(t);if(this.data.map((function(t){return t.id})).includes(e.id))throw new Error("ids must be unique");this.data.push(e),this.renderData()},t.prototype.getRow=function(t){var e=this.data.find((function(e){return e.id===t}));return void 0===e?e:l({},e)},t.prototype.setRow=function(t,e){var n=this.data.findIndex((function(e){return e.id===t}));if(-1===n)throw new RangeError("No row found with id: ".concat(t));Array.isArray(e)||"object"!=typeof e||void 0!==e.id||(e.id=this.data[n].id);var i=this.initializeRow(e);if(this.data.map((function(t,e){return e===n?void 0:t.id})).includes(i.id))throw new Error("ids must be unique");this.data[n]=this.initializeRow(e),this.renderData()},t.prototype.removeRow=function(t){var e=this.getRow(t);return void 0!==e&&(this.data=this.data.filter((function(e){return e.id!==t})),this.renderData()),e},t.prototype.setCell=function(t,e,n){var i=this.data.find((function(e){return e.id===t}));if(void 0===i)throw new RangeError("No row found with id: ".concat(t));if(void 0===this.columns.find((function(t){return t.id===e})))throw new RangeError("No column found with id: ".concat(e));if("id"===e){if(null==n||""===n)throw new TypeError("id must be a non null, non empty string");if(this.data.map((function(t){return t.id})).includes(n))throw new Error("ids must be unique")}i[e]=n,this.renderData()},t.prototype.getRawData=function(){var t=[];return this.data.forEach((function(e){return t.push(l({},e))})),t},t.prototype.getData=function(){var t=[];return this.displayed_data.forEach((function(e){return t.push(l({},e))})),t},Object.defineProperty(t.prototype,"totalPages",{get:function(){return this.ui_pages.totalPages},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"page",{get:function(){return this.currentPage},set:function(t){if(!("number"==typeof t&&t>0))throw new TypeError("Page must be a postive number");this.currentPage=t,this.ui_pages.page=t,this.renderData()},enumerable:!1,configurable:!0}),t.prototype.setFilter=function(t){var e=void 0===t?"":t;if("string"!=typeof t&&"function"!=typeof t)throw new TypeError("Filter must be a string or function");this.filter=e,this.renderData()},t.prototype.sort=function(t,e){if(void 0===e&&(e=!0),null==t||0==t)this.sortConfig=!1;else if("function"==typeof t)this.sortConfig=t;else{if(void 0===this.columns.find((function(e){return e.id===t})))throw new RangeError("No column named '".concat(t,"'"));if(e&&"boolean"!=typeof e)throw new TypeError("Ascending must be boolean");this.sortConfig={column:t,ascending:e}}this.render()},t.prototype.updateDisplayedData=function(){var t=this,e=[],n=[],i=[];if(this.filter){if("string"==typeof this.filter){var r=this.filter;i=this.data.filter((function(e){return t.columns.some((function(t){return e[t.id]===r||"string"==typeof e[t.id]&&e[t.id].toLocaleLowerCase().includes(r.toLocaleLowerCase())}))}))}else if("function"==typeof this.filter){var o=this.filter;i=this.data.filter((function(e){var n={};return t.columns.forEach((function(t){return n[t.id]=e[t.id]})),o(n)}))}}else i=function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}([],this.data,!0);if(this.sortConfig)if("function"==typeof this.sortConfig)i.sort(this.sortConfig);else if("object"==typeof this.sortConfig){var a=this.sortConfig.column,s=this.columns.find((function(t){return t.id===a}));if("function"==typeof s.sort){var d=s.sort;i.sort((function(t,e){return d(t[a],e[a])}))}else i.sort((function(t,e){return t[a]<e[a]?-1:t[a]>e[a]?1:0}));this.sortConfig.ascending||i.reverse()}if(this.pagination){var c=Math.ceil(i.length/this.pagination);this.ui_pages.totalPages=0===c?1:c,this.currentPage>this.ui_pages.totalPages&&(this.currentPage=this.ui_pages.totalPages,this.ui_pages.page=this.currentPage);var u=(this.currentPage-1)*this.pagination,h=u+this.pagination;n=i.slice(u,h),this.pages_info.innerText="Showing ".concat(0===n.length?0:u+1," to ").concat(u+n.length," of ").concat(i.length," results")}else n=i;n.forEach((function(t,n){e.push(l({},t))})),this.displayed_data=e},t.prototype.render=function(){this.renderHeader(),this.renderData()},t.prototype.renderHeader=function(){var t=this,e=this.columns.filter((function(t){return t.visible})).length,n=void 0;e<this.header_cells.length&&this.header_cells.splice(e-1).forEach((function(t){return t.remove()}));var i=this.header_cells.length,r=0;this.columns.forEach((function(o){var a;!1!==o.visible&&(r<i?(a=t.header_cells[r],r+=1):(a=new c(t.ui_header_row),t.header_cells.push(a)),a.onsort=function(e){if(t.header_cells.forEach((function(t){t!==a&&(t.sort="none")})),"none"===e)t.sort(!1),void 0!==t.onSort&&t.onSort(o.id,null);else{var n="ascending"===e;t.sort(o.id,n),void 0!==t.onSort&&t.onSort(o.id,n)}t.renderData()},a.width=100/e,void 0!==n&&(n.onresize=function(t){t/=5,a.width-t>5&&this.width+t>5&&(a.width=a.width-t,this.width=this.width+t)}),n=a,"object"==typeof t.sortConfig&&t.sortConfig.column===o.id&&(a.sort=t.sortConfig.ascending?"ascending":"descending"),!1===o.sort&&a.enableSort(!1),a.innerText=o.name)}))},t.prototype.renderData=function(){var t=this;this.updateDisplayedData();var e=this.displayed_data,n=this.columns.filter((function(e){return t.columns.find((function(t){return t.id===e.id})).visible})),i=Array.from(this.body.querySelectorAll("tr")),r=i.length,a=0;e.length<r&&i.splice(e.length).forEach((function(t){return t.classList.add("zgrid_hidden")})),o.clearElements("selected"),s.clearElements("selected"),e.forEach((function(e,d){var c,u,l=0,h=0;a<r?((c=i[a]).classList.remove("zgrid_hidden"),a+=1,u=Array.from(c.querySelectorAll("td")),l=u.length,n.length<u.length&&u.splice(n.length).forEach((function(t){return t.classList.add("zgrid_hidden")}))):(c=document.createElement("tr"),o.addElement("tr",c),s.addElement("tr",c),t.body.appendChild(c)),c.onclick=function(){t.selection&&t.setSelected(e.id)},t.selection&&t.selected===e.id&&(o.addElement("selected",c),s.addElement("selected",c)),n.forEach((function(n,i){var r;h<l?((r=u[h]).classList.remove("zgrid_hidden"),h+=1):(r=document.createElement("td"),o.addElement("td",r),s.addElement("td",r),c.appendChild(r)),r.onclick=function(){t.onClick&&t.onClick(i,d,n.id,structuredClone(e))},r.innerText=e[n.id].toString()}))}))},t}(),f=e.W;export{f as zGrid};